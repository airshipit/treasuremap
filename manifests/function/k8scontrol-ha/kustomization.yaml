apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../../../airshipctl/manifests/function/k8scontrol
  - dex-ca-cert-secret.yaml

patchesStrategicMerge:
- oidc-apiserver-extra-args.yaml

namespace: target-infra

patchesJson6902:
  - target:
      group: controlplane.cluster.x-k8s.io
      version: v1alpha3
      kind: KubeadmControlPlane
      name: "cluster-controlplane"
    path: oidc-apiserver-ca-cert.json
  - target:
      group: controlplane.cluster.x-k8s.io
      version: v1alpha3
      kind: KubeadmControlPlane
      name: cluster-controlplane
    path:  vrrp_keepalived_patch.yaml
